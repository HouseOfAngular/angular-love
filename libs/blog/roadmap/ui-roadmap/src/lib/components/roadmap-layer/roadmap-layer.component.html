<!-- Layer parent node-->
@if (layer().parentNode.nodeType === 'primary') {
  <al-roadmap-primary-node [node]="layer().parentNode" />
} @else if (layer().parentNode.nodeType === 'angular-love') {
  <al-roadmap-angular-love-node [node]="layer().parentNode" />
}

@if (showLayerConnector()) {
  <al-vertical-connector-arrow class="absolute" />
}

<!-- Layer child nodes-->
@if ((layer().childNodes || []).length) {
  <div class="layer-nodes">
    <!-- Layer left side nodes -->
    <div class="flex justify-end">
      @for (
        node of layer().childNodes | leftSlice;
        track node.id;
        let first = $first
      ) {
        <al-connected-node [isLeftSideFirst]="first">
          @if (node.nodeType === 'secondary') {
            <al-roadmap-secondary-node [node]="node" />
          } @else if (node.nodeType === 'cluster') {
            <al-roadmap-cluster [cluster]="node" />
          }
        </al-connected-node>
      }
    </div>

    <al-node-connector-line />

    <!-- Layer right side nodes -->
    <div class="flex">
      @for (
        node of layer().childNodes | rightSlice;
        track node.id;
        let last = $last
      ) {
        <al-connected-node [isRightSideLast]="last">
          @if (node.nodeType === 'secondary') {
            <al-roadmap-secondary-node [node]="node" />
          } @else if (node.nodeType === 'cluster') {
            <al-roadmap-cluster [cluster]="node" />
          }
        </al-connected-node>
      }
    </div>
  </div>
}
