<al-card alGradientCard>
  <section
    alCardContent
    aria-labelledby="newsletter-title"
    [attr.aria-live]="
      newsletterStore.loading() === 'loading' ? 'assertive' : 'off'
    "
  >
    <ng-container *transloco="let t; read: 'newsletter'">
      <form role="form" [formGroup]="form">
        <div class="flex flex-col">
          <h2 id="newsletter-title" class="text-4xl font-bold">
            {{ t('title') }}
          </h2>
          <p class="py-4">{{ t('description') }}</p>
          <fieldset>
            <legend class="hidden">Newsletter sign up form</legend>
            <div class="my-2 flex w-full flex-row">
              <input
                aria-required="true"
                type="email"
                class="bg-al-background text-al-muted border-al-border h-[60px] w-full flex-grow rounded-l-md border border-r-0 p-6 text-sm focus:outline-none"
                [attr.aria-label]="t('emailPlaceholder')"
                [placeholder]="t('emailPlaceholder')"
                formControlName="email"
              />
              <button
                al-button
                type="button"
                class="bg-al-pink rounded-l-none text-white"
                [attr.aria-label]="t('submitLabel')"
                [disabled]="!form.valid"
                (click)="postEmailAddress()"
                size="small"
              >
                <al-icon name="send" class="block h-5 bg-white" />
              </button>
            </div>
            <div class="mt-2">
              <input
                id="newsletter-checkbox"
                aria-labelledby="newsletter-label"
                aria-required="true"
                type="checkbox"
                class="newsletter-checkbox peer hidden"
                formControlName="checkbox"
              />
              <label
                id="newsletter-label"
                class="text-al-muted flex flex-row peer-checked:[&>div>div]:block"
                for="newsletter-checkbox"
              >
                <div
                  tabindex="0"
                  aria-describedby="consent-text"
                  role="checkbox"
                  class="border-al-muted mr-2 mt-1 flex aspect-square h-[14px] items-center justify-center rounded border"
                  [attr.aria-checked]="form.controls.checkbox.value"
                  (keydown.enter)="
                    form.controls['checkbox'].setValue(
                      !form.controls['checkbox'].value
                    )
                  "
                >
                  <div
                    class="bg-al-pink hidden h-[6px] w-[6px] rounded-sm"
                  ></div>
                </div>
                <span
                  id="consent-text"
                  class="before:text-al-pink before:content-['*']"
                >
                  {{ t('consent') }}
                </span>
              </label>
            </div>
          </fieldset>
        </div>
      </form>
    </ng-container>
  </section>
</al-card>
